import {
  require_prop_types
} from "./chunk-ITKTPM2Q.js";
import {
  require_react
} from "./chunk-LHFL5OEP.js";
import {
  __toESM
} from "./chunk-DC5AMYBS.js";

// ../../node_modules/react-responsive-masonry/es/Masonry/index.js
var import_prop_types = __toESM(require_prop_types());
var import_react = __toESM(require_react());
function _extends() {
  _extends = Object.assign || function(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };
  return _extends.apply(this, arguments);
}
function _inheritsLoose(subClass, superClass) {
  subClass.prototype = Object.create(superClass.prototype);
  subClass.prototype.constructor = subClass;
  _setPrototypeOf(subClass, superClass);
}
function _setPrototypeOf(o, p) {
  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf2(o2, p2) {
    o2.__proto__ = p2;
    return o2;
  };
  return _setPrototypeOf(o, p);
}
var Masonry = (function(_React$Component) {
  _inheritsLoose(Masonry2, _React$Component);
  function Masonry2() {
    var _this;
    _this = _React$Component.call(this) || this;
    _this.state = {
      columns: [],
      childRefs: [],
      hasDistributed: false
    };
    return _this;
  }
  var _proto = Masonry2.prototype;
  _proto.componentDidUpdate = function componentDidUpdate() {
    if (!this.state.hasDistributed && !this.props.sequential) this.distributeChildren();
  };
  Masonry2.getDerivedStateFromProps = function getDerivedStateFromProps(props, state) {
    var children = props.children, columnsCount = props.columnsCount;
    var hasColumnsChanged = columnsCount !== state.columns.length;
    if (state && children === state.children && !hasColumnsChanged) return null;
    return _extends({}, Masonry2.getEqualCountColumns(children, columnsCount), {
      children,
      hasDistributed: false
    });
  };
  _proto.shouldComponentUpdate = function shouldComponentUpdate(nextProps) {
    return nextProps.children !== this.state.children || nextProps.columnsCount !== this.props.columnsCount;
  };
  _proto.distributeChildren = function distributeChildren() {
    var _this2 = this;
    var _this$props = this.props, children = _this$props.children, columnsCount = _this$props.columnsCount;
    var columnHeights = Array(columnsCount).fill(0);
    var isReady = this.state.childRefs.every(function(ref) {
      return ref.current.getBoundingClientRect().height;
    });
    if (!isReady) return;
    var columns = Array.from({
      length: columnsCount
    }, function() {
      return [];
    });
    var validIndex = 0;
    import_react.default.Children.forEach(children, function(child) {
      if (child && import_react.default.isValidElement(child)) {
        var childHeight = _this2.state.childRefs[validIndex].current.getBoundingClientRect().height;
        var minHeightColumnIndex = columnHeights.indexOf(Math.min.apply(Math, columnHeights));
        columnHeights[minHeightColumnIndex] += childHeight;
        columns[minHeightColumnIndex].push(child);
        validIndex++;
      }
    });
    this.setState(function(p) {
      return _extends({}, p, {
        columns,
        hasDistributed: true
      });
    });
  };
  Masonry2.getEqualCountColumns = function getEqualCountColumns(children, columnsCount) {
    var columns = Array.from({
      length: columnsCount
    }, function() {
      return [];
    });
    var validIndex = 0;
    var childRefs = [];
    import_react.default.Children.forEach(children, function(child) {
      if (child && import_react.default.isValidElement(child)) {
        var ref = import_react.default.createRef();
        childRefs.push(ref);
        columns[validIndex % columnsCount].push(
          import_react.default.createElement("div", {
            style: {
              display: "flex",
              justifyContent: "stretch"
            },
            key: validIndex,
            ref
          }, child)
          // React.cloneElement(child, {ref}) // cannot attach refs to functional components without forwardRef
        );
        validIndex++;
      }
    });
    return {
      columns,
      childRefs
    };
  };
  _proto.renderColumns = function renderColumns() {
    var _this$props2 = this.props, gutter = _this$props2.gutter, itemTag = _this$props2.itemTag, itemStyle = _this$props2.itemStyle;
    return this.state.columns.map(function(column, i) {
      return import_react.default.createElement(itemTag, {
        key: i,
        style: _extends({
          display: "flex",
          flexDirection: "column",
          justifyContent: "flex-start",
          alignContent: "stretch",
          flex: 1,
          width: 0,
          gap: gutter
        }, itemStyle)
      }, column.map(function(item) {
        return item;
      }));
    });
  };
  _proto.render = function render() {
    var _this$props3 = this.props, gutter = _this$props3.gutter, className = _this$props3.className, style = _this$props3.style, containerTag = _this$props3.containerTag;
    return import_react.default.createElement(containerTag, {
      style: _extends({
        display: "flex",
        flexDirection: "row",
        justifyContent: "center",
        alignContent: "stretch",
        boxSizing: "border-box",
        width: "100%",
        gap: gutter
      }, style),
      className
    }, this.renderColumns());
  };
  return Masonry2;
})(import_react.default.Component);
Masonry.propTypes = true ? {
  children: import_prop_types.default.oneOfType([import_prop_types.default.arrayOf(import_prop_types.default.node), import_prop_types.default.node]).isRequired,
  columnsCount: import_prop_types.default.number,
  gutter: import_prop_types.default.string,
  className: import_prop_types.default.string,
  style: import_prop_types.default.object,
  containerTag: import_prop_types.default.string,
  itemTag: import_prop_types.default.string,
  itemStyle: import_prop_types.default.object,
  sequential: import_prop_types.default.bool
} : {};
Masonry.defaultProps = {
  columnsCount: 3,
  gutter: "0",
  className: null,
  style: {},
  containerTag: "div",
  itemTag: "div",
  itemStyle: {},
  sequential: false
};
var Masonry_default = Masonry;

// ../../node_modules/react-responsive-masonry/es/ResponsiveMasonry/index.js
var import_react2 = __toESM(require_react());
var import_prop_types2 = __toESM(require_prop_types());
var DEFAULT_COLUMNS_COUNT = 1;
var DEFAULT_GUTTER = "10px";
var useIsomorphicLayoutEffect = typeof window !== "undefined" ? import_react2.useLayoutEffect : import_react2.useEffect;
var useHasMounted = function useHasMounted2() {
  var _useState = (0, import_react2.useState)(false), hasMounted = _useState[0], setHasMounted = _useState[1];
  useIsomorphicLayoutEffect(function() {
    setHasMounted(true);
  }, []);
  return hasMounted;
};
var useWindowWidth = function useWindowWidth2() {
  var hasMounted = useHasMounted();
  var _useState2 = (0, import_react2.useState)(typeof window !== "undefined" ? window.innerWidth : 0), width = _useState2[0], setWidth = _useState2[1];
  var handleResize = (0, import_react2.useCallback)(function() {
    if (!hasMounted) return;
    setWidth(window.innerWidth);
  }, [hasMounted]);
  useIsomorphicLayoutEffect(function() {
    if (hasMounted) {
      window.addEventListener("resize", handleResize);
      handleResize();
      return function() {
        return window.removeEventListener("resize", handleResize);
      };
    }
  }, [hasMounted, handleResize]);
  return width;
};
var MasonryResponsive = function MasonryResponsive2(_ref) {
  var _ref$columnsCountBrea = _ref.columnsCountBreakPoints, columnsCountBreakPoints = _ref$columnsCountBrea === void 0 ? {
    350: 1,
    750: 2,
    900: 3
  } : _ref$columnsCountBrea, _ref$gutterBreakPoint = _ref.gutterBreakPoints, gutterBreakPoints = _ref$gutterBreakPoint === void 0 ? {} : _ref$gutterBreakPoint, children = _ref.children, _ref$className = _ref.className, className = _ref$className === void 0 ? null : _ref$className, _ref$style = _ref.style, style = _ref$style === void 0 ? null : _ref$style;
  var windowWidth = useWindowWidth();
  var getResponsiveValue = (0, import_react2.useCallback)(function(breakPoints, defaultValue) {
    var sortedBreakPoints = Object.keys(breakPoints).sort(function(a, b) {
      return a - b;
    });
    var value = sortedBreakPoints.length > 0 ? breakPoints[sortedBreakPoints[0]] : defaultValue;
    sortedBreakPoints.forEach(function(breakPoint) {
      if (breakPoint < windowWidth) {
        value = breakPoints[breakPoint];
      }
    });
    return value;
  }, [windowWidth]);
  var columnsCount = (0, import_react2.useMemo)(function() {
    return getResponsiveValue(columnsCountBreakPoints, DEFAULT_COLUMNS_COUNT);
  }, [getResponsiveValue, columnsCountBreakPoints]);
  var gutter = (0, import_react2.useMemo)(function() {
    return getResponsiveValue(gutterBreakPoints, DEFAULT_GUTTER);
  }, [getResponsiveValue, gutterBreakPoints]);
  return import_react2.default.createElement("div", {
    className,
    style
  }, import_react2.default.Children.map(children, function(child, index) {
    return import_react2.default.cloneElement(child, {
      key: index,
      columnsCount,
      gutter
    });
  }));
};
MasonryResponsive.propTypes = true ? {
  children: import_prop_types2.default.oneOfType([import_prop_types2.default.arrayOf(import_prop_types2.default.node), import_prop_types2.default.node]).isRequired,
  columnsCountBreakPoints: import_prop_types2.default.object,
  className: import_prop_types2.default.string,
  style: import_prop_types2.default.object
} : {};
var ResponsiveMasonry_default = MasonryResponsive;

// ../../node_modules/react-responsive-masonry/es/index.js
var es_default = Masonry_default;
export {
  ResponsiveMasonry_default as ResponsiveMasonry,
  es_default as default
};
//# sourceMappingURL=react-responsive-masonry.js.map
